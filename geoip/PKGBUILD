
pkgname=geoip
pkgver=1.6.6
pkgrel=1
pkgdesc="Non-DNS IP-to-country resolver C library & utils"
arch=('x86_64')
license=('GPL')
url="http://www.maxmind.com/app/c"
depends=('zlib' 'geoip-database')
backup=('etc/geoip/GeoIP.conf')
options=('!libtool' '!emptydirs')
#source=("http://www.maxmind.com/download/geoip/api/c/GeoIP-${pkgver}.tar.gz")
source=("https://github.com/maxmind/geoip-api-c/archive/v${pkgver}.tar.gz")
md5sums=('20f956ea5c6975c0fa3920da81ad12b3')

build() {
  cd "${srcdir}/${pkgname}-api-c-${pkgver}"

  #autoreconf -vi
  ./bootstrap
  ./configure --prefix=/usr \
              --mandir=/usr/share/man \
              --sysconfdir=/etc/geoip

  make
}

check() {
  cd "${srcdir}/${pkgname}-api-c-${pkgver}"

  make check
}

package() {
  cd "${startdir}/src/${pkgname}-api-c-${pkgver}"
  
  make DESTDIR="${pkgdir}" install
}

