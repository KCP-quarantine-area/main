
pkgname=netpbm
pkgver=10.66.04
_rev=2214
pkgrel=1
pkgdesc="A toolkit for manipulation of graphic images"
arch=('x86_64')
license=('custom' 'BSD' 'GPL' 'LGPL')
url="http://netpbm.sourceforge.net/"
depends=('perl' 'libjpeg-turbo' 'libpng' 'libtiff' 'libxml2' 'libx11')
makedepends=('python2' 'subversion')
options=('!makeflags')

build() {
  cd "${srcdir}"
  svn checkout http://svn.code.sf.net/p/netpbm/code/advanced -r ${_rev} netpbm
  
  cd "${srcdir}/netpbm"
  
  # use the interactive way
  ./configure
  
  sed -i 's|/link|/lib|' lib/Makefile

  make
}

package() {
  cd "${srcdir}/netpbm"
  make package pkgdir="${pkgdir}/usr"
  
  install -D -m644 "${srcdir}/netpbm/doc/copyright_summary" \
    "${pkgdir}/usr/share/licenses/${pkgname}/copyright_summary.txt"
    
  mv -iv "${pkgdir}/usr/man" "${pkgdir}/usr/share/man"
}
