
pkgname=libindi
pkgver=0.9.8.1
_pkgver=0.9.8
pkgrel=1
pkgdesc="Interface control protocol providing backend driver support and
        automation for a wide range of Astronomical devices (telescopes, focusers, CCDs..etc)."
url="http://indi.sourceforge.net/"
license=('GPL2')
arch=('x86_64')
depends=('gcc-libs' 'zlib' 'libnova' 'cfitsio' 'libusb-compat' 'boost-libs' 'libjpeg-turbo' 'gsl')
makedepends=('boost' 'cmake')
source=("http://sourceforge.net/projects/indi/files/${pkgname}_${pkgver}.tar.gz")
options=('!libtool')
md5sums=('95b03af45ae42d6fca494fd5bcd63072')

build() {
     cd $srcdir
     mkdir -p build
	
     cd build
     cmake ../libindi-$_pkgver \
	-DCMAKE_BUILD_TYPE=Release \
	-DCMAKE_INSTALL_PREFIX=/usr 
     make
}

package() {
     cd $srcdir/build 
     make DESTDIR=$pkgdir install

     install -d "${pkgdir}"/usr/lib/udev/rules.d
     mv "${pkgdir}"/lib/udev/rules.d/99-gpusb.rules "${pkgdir}"/usr/lib/udev/rules.d/
     rmdir "${pkgdir}"/lib/udev/rules.d "${pkgdir}"/lib/udev "${pkgdir}"/lib
}
