
pkgname=telepathy-qt
pkgver=0.9.9
pkgrel=1
pkgdesc="A library for Qt-based Telepathy clients."
arch=('x86_64')
url="http://telepathy.freedesktop.org"
groups=('telepathy')
license=('LGPL')
options=('!libtool')
depends=('qt' 'telepathy-farstream' 'dbus-python')
makedepends=('libxslt' 'python2' 'cmake' 'doxygen' 'git')
conflicts=('telepathy-qt4')
provides=('telepathy-qt4')
#source=("http://telepathy.freedesktop.org/releases/$pkgname/$pkgname-$pkgver.tar.gz")
source=("https://github.com/davidedmundson/telepathy-qt.git")
md5sums=('SKIP')

build() {
    cd "${srcdir}" 
    git clone -b farstream-0.2-port https://github.com/davidedmundson/telepathy-qt.git

    mkdir build
    cd build
    cmake ../${pkgname} \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INSTALL_PREFIX=/usr
    make
}

package() {
    cd "${srcdir}"/build
    make DESTDIR="$pkgdir" install
}
