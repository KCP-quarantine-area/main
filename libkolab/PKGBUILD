
pkgname=libkolab
pkgver=1.0.0
pkgrel=1
pkgdesc="Advanced Kolab Object Handling Library"
url='http://kolab.org/'
arch=('x86_64')
license=('GPL')
depends=('libkolabxml' 'kdepimlibs' 'kcalutils')
makedepends=('extra-cmake-modules' 'kdoctools' 'boost')
source=("http://mirror.kolabsys.com/pub/releases/${pkgname}-${pkgver}.tar.gz"
        "https://git.kolab.org/file/data/t7p5qjkjfi4eqxpnyjg2/PHID-FILE-riut3j5brxqoart2s7ol/D41.diff")
#source=("http://git.kolab.org/libkolab/snapshot/${pkgname}-${pkgver}.tar.gz")
md5sums=('3670aae0d6b2ad32f65abd65352e79eb'
         '46198b207b39d9f067812ce10114ab19')

prepare() {
    cd $pkgname-${pkgver}
  
    patch -p1 -i $srcdir/D41.diff
}
         
build() {
  mkdir build
  cd build
  
  cmake ../${pkgname}-${pkgver} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_SKIP_RPATH=ON \
    -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd build
  
  make DESTDIR="${pkgdir}" install
}
